<Window x:Class="Messenger_Meowtalk.Client.NewChatWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Новый чат" 
        Height="500" Width="400"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{StaticResource BackgroundBrush}">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" Text="Создать новый чат" 
                   FontSize="{StaticResource FontSizeLarge}"
                   FontWeight="Bold"
                   Margin="0,0,0,15"/>

        <!-- Тип чата -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
            <RadioButton x:Name="PrivateChatRadio" Content="Личный чат" 
                        IsChecked="True" GroupName="ChatType" Margin="0,0,15,0"/>
            <RadioButton x:Name="GroupChatRadio" Content="Групповой чат" 
                        GroupName="ChatType"/>
        </StackPanel>

        <!-- Название группового чата (только для групповых) -->
        <StackPanel Grid.Row="2" Orientation="Vertical" Margin="0,0,0,10" 
                    Visibility="{Binding IsChecked, ElementName=GroupChatRadio, Converter={StaticResource BoolToVisibilityConverter}}">
            <TextBlock Text="Название чата:" 
                       FontSize="{StaticResource FontSizeNormal}"
                       Margin="0,0,0,5"/>
            <TextBox x:Name="GroupNameTextBox" 
                     Height="35" 
                     Padding="10"
                     FontSize="{StaticResource FontSizeNormal}"
                     Text="Новый групповой чат"/>
        </StackPanel>

        <!-- Список доступных пользователей -->
        <Border Grid.Row="3" BorderBrush="LightGray" BorderThickness="1" 
                Background="White" Margin="0,0,0,10">
            <Grid>
                <!-- Сообщение когда пользователей нет -->
                <TextBlock x:Name="UsersInfoText" 
                           Text="Пока нет других пользователей. Отправьте сообщение кому-нибудь, чтобы они появились здесь."
                           Visibility="Collapsed"
                           FontStyle="Italic"
                           Foreground="Gray"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Margin="10"/>

                <!-- Список пользователей -->
                <ScrollViewer MaxHeight="200">
                    <ItemsControl x:Name="UsersList" ItemsSource="{Binding AvailableUsers}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="10,5" BorderBrush="LightGray" BorderThickness="0,0,0,1">
                                    <CheckBox Content="{Binding Username}" 
                                              IsChecked="{Binding IsSelected}"
                                              FontSize="{StaticResource FontSizeNormal}"/>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Кнопки -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Отмена" 
                    Width="80" Height="30" 
                    Margin="0,0,10,0"
                    Click="CancelButton_Click"/>
            <Button Content="Создать" 
                    Width="80" Height="30"
                    Style="{StaticResource PrimaryButton}"
                    Click="CreateButton_Click"/>
        </StackPanel>
    </Grid>
</Window>